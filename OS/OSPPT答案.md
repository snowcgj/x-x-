[]: C:\Users\29485\OneDrive\图片\操作系统考试

好的，我会根据每个题目的要求提供明确且详细的解答。

---

### 练习

1. **题目**：对于 Chen 和 Thapar 方法，假设一个编码为 PAL 格式的3小时电影需要每15分钟进行一次流式传输。需要多少并发流？

   ![image-20241106214716885](E:\ANJUOtherFiles\TyporaPics\image-20241106214716885.png)

2. **题目**：一个小型视频服务器有八部电影。根据 Zipf 定律，最受欢迎的电影、第二受欢迎的电影，依次类推，的概率分别是多少？

   ![image-20241106214737315](E:\ANJUOtherFiles\TyporaPics\image-20241106214737315.png)

3. **题目**：两个点播视频用户开始观看同一部 PAL 电影，相差6秒。如果系统加速一个流并减速另一个流，使得两者能够在3分钟内同步，则需要加速或减速多少百分比？

   ![image-20241106214748924](E:\ANJUOtherFiles\TyporaPics\image-20241106214748924.png)

4. **题目**：考虑以下一组对磁盘的请求。每个请求由一个元组表示（以毫秒为单位的截止时间，磁柱）。使用 scan-EDF 算法处理，其中即将到来的四个截止时间被聚集在一起并服务。假设服务每个请求的平均时间为6毫秒，是否存在未满足的截止时间？

   **回答**：按照最早截止时间顺序和当前时间（15毫秒）开始处理每个请求，计算完成时间如下：

   - **请求 (32, 300)**：从15毫秒开始，6毫秒后完成于21毫秒 < 截止时间32毫秒，满足。
   - **请求 (34, 310)**：21毫秒开始，6毫秒后完成于27毫秒 < 截止时间34毫秒，满足。
   - **请求 (36, 500)**：27毫秒开始，6毫秒后完成于33毫秒 < 截止时间36毫秒，满足。
   - **请求 (40, 210)**：33毫秒开始，6毫秒后完成于39毫秒 < 截止时间40毫秒，满足。

   **结论**：所有请求在截止时间内完成，因此不存在未满足的截止时间。

   ![image-20241106214801934](E:\ANJUOtherFiles\TyporaPics\image-20241106214801934.png)

5. **题目**： 一种在磁盘上连续分配并且可以避免空洞的方案是，每次删除一个文件后就紧缩一下磁盘。由于所有的文件都是连续的，复制文件时需要寻道和旋转延迟以便读取文件，然后全速传送。在写回文件时要做同样的工作。假设寻道时间为5毫秒，旋转延迟为4毫秒，传送速率为8MB/s，而文件平均长度是8KB，把一个文件读入内存并写回到磁盘上的一个新位置需要多长时间？紧缩16GB磁盘的一半需要多少时间？

![image-20241106214841822](E:\ANJUOtherFiles\TyporaPics\image-20241106214841822.png)

![image-20241106214849927](E:\ANJUOtherFiles\TyporaPics\image-20241106214849927.png)

**最终答案**：紧缩16GB磁盘的一半大约需要192.24分钟。



**题目**：

1. **紧凑**：假设有很多空闲区和数据段随机分布，读或写32位长度字需要10纳秒的时间，紧凑128MB大概需要多长时间？

2. 在一个交换系统中，按内存地址排列的空闲区大小是：10KB, 4KB, 20KB, 18KB, 7KB, 9KB, 12KB 和 15KB。对于连续的段请求：

   - 1. 12KB
   - 1. 10KB
   - 1. 9KB

   使用 **first-fit** 将分配哪个空闲区？使用 **best-fit**、**worst-fit** 以及 **next-fit** 呢？

![image-20241106215001645](E:\ANJUOtherFiles\TyporaPics\image-20241106215001645.png)

![image-20241106215046366](E:\ANJUOtherFiles\TyporaPics\image-20241106215046366.png)

![image-20241106215054893](E:\ANJUOtherFiles\TyporaPics\image-20241106215054893.png)

![image-20241106215107683](E:\ANJUOtherFiles\TyporaPics\image-20241106215107683.png)

在分页存储管理系统中，如果被访问页面在内存，则满足一个内存请求需要200ns；如果被访问页面不在内存，则分两种情况：

- 如果系统有空闲页框或被置换的页面未被修改，则置换所需时间为7ms；
- 如果系统被置换的页面已被修改，则置换所需时间为15ms。

假设系统缺页率为5%，且被换出的页面有60%被修改。求有效访问时间（假设系统只运行一个进程且交换时CPU空闲）。

![image-20241106215201307](E:\ANJUOtherFiles\TyporaPics\image-20241106215201307.png)

![image-20241106215210797](E:\ANJUOtherFiles\TyporaPics\image-20241106215210797.png)

![image-20241106215224388](E:\ANJUOtherFiles\TyporaPics\image-20241106215224388.png)

**题目**：

假设有一个使用信箱的消息传递系统，当向满信箱发送消息或从空信箱收消息时，进程都不会阻塞，相反，会得到一个错误代码。进程响应错误代码的处理方式为一遍一遍地重试，直到成功为止。这样方式会导致竞争条件吗？



### 解答

**解答**：

是的，这种方式会导致竞争条件。

**原因**：

当多个进程同时访问信箱资源时，如果一个进程在发送消息或接收消息时发现信箱已满或为空，它会得到错误代码，并尝试重新执行操作。因为进程之间没有任何同步机制来保证对信箱操作的互斥，所以多个进程会不断重试访问信箱。这种无限重试的方式可能会导致以下竞争条件：

1. **重复冲突**：多个进程不断检查信箱状态并尝试操作，由于没有锁或同步机制，可能会产生资源抢占的情况，导致一个进程始终无法成功操作信箱。
2. **活锁**：在某些情况下，两个或多个进程可能会陷入一种状态，即它们都不断地重试，但因为彼此的干扰，始终无法完成操作。这种情况虽然不同于死锁（没有进程永久阻塞），但进程实际也无法取得进展，类似于“活锁”。
3. **资源浪费**：持续重试会消耗CPU资源，可能导致系统性能下降，特别是在高竞争的情况下，频繁的重试会影响其他系统资源的使用效率。

**改进方法**：

为了避免这种竞争条件，可以使用互斥锁或信号量等同步机制来控制对信箱的访问，确保每次只有一个进程能够操作信箱，或者采用阻塞机制，让进程在信箱状态不满足条件时进入等待，而不是立即重试。



对某系统进行监测后表明，当阻塞在 I/O 之前时，平均每个进程运行时间为 TTT。一次进程切换需要的时间为 SSS，这里 SSS 实际上就是开销。对于采用时间片长度为 QQQ 的轮转调度，请给出以下各种情况下 CPU 利用率的计算公式：

1. Q=∞Q = \inftyQ=∞
2. Q>TQ > TQ>T
3. S<Q<TS < Q < TS<Q<T
4. Q=SQ = SQ=S
5. QQQ 趋近于 0

![image-20241106215327835](E:\ANJUOtherFiles\TyporaPics\image-20241106215327835.png)

![image-20241106215349562](E:\ANJUOtherFiles\TyporaPics\image-20241106215349562.png)

![image-20241106215356608](E:\ANJUOtherFiles\TyporaPics\image-20241106215356608.png)

**题目**：

有 5 个待运行作业，估计它们的运行时间分别是 9、6、3、5 和 xxx。采用哪种次序运行这些作业将得到最短的平均响应时间？

![image-20241106215451123](E:\ANJUOtherFiles\TyporaPics\image-20241106215451123.png)

![image-20241106215457807](E:\ANJUOtherFiles\TyporaPics\image-20241106215457807.png)

**题目**：

使用 α=12\alpha = \frac{1}{2}α=21 的老化算法来预测运行时间。先前的四次运行，从最老的一个到最近的一个，其运行时间分别是 40ms、20ms、40ms 和 15ms。下次的预测时间是多少？

![image-20241106215542594](E:\ANJUOtherFiles\TyporaPics\image-20241106215542594.png)

![image-20241106215601646](E:\ANJUOtherFiles\TyporaPics\image-20241106215601646.png)

![image-20241106215607743](E:\ANJUOtherFiles\TyporaPics\image-20241106215607743.png)

一个软实时系统有 4 个周期时间，其周期分别是 50ms、100ms、200ms 和 250ms。假设这 4 个事件分别需要 35ms、20ms、10ms 和 xxx ms 的 CPU 时间，保持系统可调度性的最大 xxx 值是多少？

![image-20241106215652553](E:\ANJUOtherFiles\TyporaPics\image-20241106215652553.png)

![image-20241106215707168](E:\ANJUOtherFiles\TyporaPics\image-20241106215707168.png)



**题目**：

1. 下列哪条指令应仅在内核模式下允许？

   - (a) 禁用所有中断。
   - (b) 读取实时时钟。
   - (c) 设置实时时钟。
   - (d) 更改内存映射。

2. 一个文件的文件描述符 `fd` 包含以下字节序列：3, 1, 4, 1, 5, 9, 2, 6, 5, 3, 5。执行以下系统调用：

   - `lseek(fd, 3, SEEK_SET);`
   - `read(fd, &buffer, 4);`

   其中，`lseek` 调用将文件指针定位到文件的第 3 个字节。读取完成后，`buffer` 中包含哪些内容？

   ![image-20241106215730355](E:\ANJUOtherFiles\TyporaPics\image-20241106215730355.png)

   ![image-20241106215738447](E:\ANJUOtherFiles\TyporaPics\image-20241106215738447.png)

假设一个 10MB 的文件存储在磁盘上的同一磁道（磁道 50）的连续扇区中。磁盘臂当前位于磁道 100 上方。需要多长时间才能从磁盘中取回该文件？假设将磁臂从一个磁道移动到下一个磁道需要约 1 毫秒，磁头需要约 5 毫秒才能旋转到文件开头所在的扇区下。此外，假设读取速率为 200MB/s。

一个可移植操作系统是指可以在不进行任何修改的情况下从一种系统架构移植到另一种系统架构的操作系统。解释为什么构建一个完全可移植的操作系统是不切实际的。描述在设计高度可移植的操作系统时会使用的两个高层次的层。



![image-20241106215926440](E:\ANJUOtherFiles\TyporaPics\image-20241106215926440.png)

![image-20241106215934621](E:\ANJUOtherFiles\TyporaPics\image-20241106215934621.png)





